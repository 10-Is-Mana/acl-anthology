{{ define "main" }}
<div>
  <aside class="alert alert-info alert-dismissible acl-news" role="alert">
    <!-- Note that the content for index.html, as a sort of list page, will pull from content/_index.md -->
    <div class="acl-news-date">{{ .PublishDate.Format "January 2006" }}</div>
    {{ .Content }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
    </button>
  </aside>

  {{ $.Scratch.Set "paper_count" 0 }}
  {{ range $.Site.Data.papers }}
    {{ $.Scratch.Add "paper_count" (len .) }}
  {{ end }}
  <h2>Welcome to the ACL Anthology</h2>

  <aside class="card-group pb-3 font-weight-light">
    <div class="card">
      <div class="card-body">
        The ACL Anthology currently hosts {{ $.Scratch.Get "paper_count" }} papers on the study of computational linguistics and natural language processing.
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <a href="http://groups.google.com/group/acl-anthology?hl=en">Subscribe to the mailing list</a> to receive announcements and updates to the Anthology.
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        Do you love the Anthology? Not an ACL member yet? Please <a href="http://www.aclweb.org/portal/user/register">join as an ACL member</a> to help keep the Anthology open for all to use.
      </div>
    </div>
  </aside>

  <main aria-role="main">
    <h6>ACL Events</h6>
    {{/* ACL EVENTS */}}
    {{/* Hardcoded range of years because the table layout depends on it */}}
    {{ $all_years := seq 2019 -1 1979 }}
    {{/* Years that should have a border on their left-hand side */}}
    {{ $border_years := slice "2019" "2009" "1999" "1989" }}

    <table class="table table-hover table-sm table-responsive-xl small border text-nowrap">
      <thead>
        <tr class="text-center border-left border-right">
          <th class="border-left" scope="col">Venue</th>
          <th class="border-left" scope="col" colspan="10">Present &ndash; 2010</th>
          <th class="border-left" scope="col" colspan="10">2009 &ndash; 2000</th>
          <th class="border-left" scope="col" colspan="10">1999 &ndash; 1990</th>
          <th class="border-left" scope="col" colspan="11">1989 and older</th>
        </tr>
      </thead>
      <tbody>
        {{ range $acronym, $venue := $.Site.Data.venues }}
        {{ if (and $venue.is_toplevel $venue.is_acl) }}
        <tr class="border-left border-right">
          <th scope="row" class="text-center"><a href="{{ relref $ (printf "/venues/%s.md" $venue.slug) }}">{{ $acronym }}</a></td>
          {{ range $all_years }}
          {{ $year := string . }}
          <td class="{{ cond (in $border_years $year) "border-left" "" }}">
            {{ with index $venue "volumes_by_year" $year }}
            <a href="{{ relref $ (printf "/events/%s-%s.md" $venue.slug $year) }}">
              {{/* hard-coded exception for the '79 CL volume, which actually goes back to '74 */}}
              {{- if (and (eq $acronym "CL") (eq $year "1979")) -}}
                79&ndash;74
              {{- else -}}
                {{- slicestr $year 2 4 -}}
              {{- end -}}
            </a>
            {{ end }}</td>
          {{ end }}
        </tr>
        {{ end }}
      {{ end }}
      </tbody>
    </table>

    <h6>Non-ACL Events</h6>
    {{/* NON-ACL EVENTS */}}
    {{/* Hardcoded range of years because the table layout depends on it */}}
    {{ $all_years := seq 2019 -1 1986 | append (slice 1982 1980 1978 1975 1973 1969 1967 1965) }}
    {{/* Years that should have a border on their left-hand side */}}
    {{ $border_years := slice "2019" "2009" "1999" "1989" }}

    <table class="table table-hover table-sm table-responsive-xl small border text-nowrap">
      <thead>
        <tr class="text-center border-left border-right">
          <th class="border-left" scope="col">Venue</th>
          <th class="border-left" scope="col" colspan="10">Present &ndash; 2010</th>
          <th class="border-left" scope="col" colspan="10">2009 &ndash; 2000</th>
          <th class="border-left" scope="col" colspan="10">1999 &ndash; 1990</th>
          <th class="border-left" scope="col" colspan="12">1989 and older</th>
        </tr>
      </thead>
      <tbody>
        {{ range $acronym, $venue := $.Site.Data.venues }}
        {{ if (and $venue.is_toplevel (not $venue.is_acl)) }}
        <tr class="border-left border-right">
          <th scope="row" class="text-center"><a href="{{ relref $ (printf "/venues/%s.md" $venue.slug) }}">{{ $acronym }}</a></td>
          {{ range $all_years }}
          {{ $year := string . }}
          <td class="{{ cond (in $border_years $year) "border-left" "" }}">
            {{ with index $venue "volumes_by_year" $year }}
            <a href="{{ relref $ (printf "/events/%s-%s.md" $venue.slug $year) }}">
              {{- slicestr $year 2 4 -}}
            </a>
            {{ end }}</td>
          {{ end }}
        </tr>
        {{ end }}
      {{ end }}
      </tbody>
    </table>
  </main>
</div>
{{ end }}
