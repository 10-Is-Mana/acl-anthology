# ACL Anthology - Detailed Instructions

These are the detailed instructions on generating the ACL Anthology website as
seen on <https://aclanthology.info>.


## Generating the Anthology

The Anthology website is generated using the [Hugo](https://gohugo.io) static
site generator.  However, before we can actually invoke Hugo, we need to prepare
the contents of the website.

### Step 1: Prepare the data for site generation

The data sources for the Anthology currently reside in the [`import/`](import/)
directory.  XML files contain the authoritative paper metadata, and additional
YAML files document information about venues and special interest groups (SIGs).
Before the Anthology website can be generated, all this information needs to be
converted and preprocessed for the static site generator.

This is achieved by calling:

```bash
$ python3 bin/create_hugo_yaml.py
```

This process should not take longer than a few minutes and can be sped up
considerably by [installing PyYAML with C
bindings](http://rmcgibbo.github.io/blog/2013/05/23/faster-yaml-parsing-with-libyaml/).

### Step 2: Create page stubs for site generation

The YAML files created in Step 1 are used by Hugo to pull in information about
venues/papers/etc., but they cannot be used to define what actual *pages* the
website should have.  Therefore, another script takes the YAML files generated
in Step 1 and produce stubs of pages for each individual paper, venue, etc.

This is achieved by calling:

```bash
$ python3 bin/create_hugo_pages.py
```

This script will produce *a lot* of files in the `hugo/content/` subdirectory
(most prominently, one for each paper in the Anthology).

### Step 3: Create bibliography export files for papers

In this step, we create `.bib` files for each paper and proceedings volume in
the Anthology.  This is achieved by calling:

```bash
$ python3 bin/create_export_formats.py
```

The exported files will be written to the `hugo/data-export/` subdirectory.

### Step 4: Run Hugo

After all necessary files have been created, the website can be built by simply
invoking Hugo from the `hugo/` subdirectory.  Optionally, the `--minify` flag
can be used to create minified HTML output:

```bash
$ hugo --minify
```

Generating the website is quite a resource-hungry process, but should not take
longer than a few minutes.  Due to the high memory usage, it is possible that it
will cause swapping and consequently slow down your system for a while.

The fully generated website will be in `hugo/public/` afterwards.


## Making changes to the Anthology

### Content

If you need to make changes to the Anthology's content, the first step should be
to look at [the Anthology's data files](import/).  If the information is not
directly contained there, it is possible that it is derived during the YAML
conversion process (Step 1 of "Generating the Anthology").  In that case, check
the [Python `anthology` module](bin/anthology/) that reads in and interprets the
data files.

The static site tries to follow a strict *separation of content and
presentation.* That means if you do want to display additional data on a page,
if it is related to papers/venues/SIGs/etc., it should *never* be derived within
Hugo's website templates, but added somewhere in the YAML output that is
generated by [the `create_hugo_yaml.py` script](bin/create_hugo_yaml.py).

#### A Note on Hugo Taxonomies

Hugo natively supports
[taxonomies](https://gohugo.io/content-management/taxonomies/).  In blogs, for
example, this can be used to provide tags or categories metadata for individual
posts.  In principle, we could use the same feature for the Anthology, e.g. to
provide author and venue metadata on "paper" pages --- that way, Hugo would take
care of compiling lists of papers belonging to each author and generating an
overview page for each author.  However, this increases the generation time for
the website by more than a factor of 10.  Since we're not writing any content
manually, but generating it from data files anyway, we are not using Hugo's
taxonomy feature but generate these pages in the Python scripts from Steps 1 and
2 instead.


### Presentation

**TODO**

