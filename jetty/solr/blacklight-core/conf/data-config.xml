<dataConfig>
  <dataSource type="JdbcDataSource" 
              driver="org.postgresql.Driver"
              url="jdbc:postgresql://localhost/acl_development" 
              user="nglinh" 
              password=""/>
  <!-- <script>
    <![CDATA[
      function appendName(row) {
        var name = "";
        name += row.get('first_name') + ' ';
        name += row.get('last_name');
        row.put('author', name);
        return row; 
      }
    ]]>
  </script> -->
  <document>
    <!-- <entity name="Person" 
            query="select * from people">
            <field column="FIRST_NAME" name="first_name"/>
            <field column="LAST_NAME" name="last_name"/>

    </entity> 
    SELECT * FROM papers P, people A, papers_people PA
            WHERE P.id = PA.paper_id AND A.id = PA.person_id
  -->
    <entity name="paper"
            query="SELECT * FROM papers">
            <field column="title" name="title"/>
            <field column="title" name="title_unstem"/>
            <field column="year" name="publish_date"/>
            <field column="anthology_id" name="paper_anthology"/>
            <field column="attach_type" name="attach_type"/>
            <entity name="person" query="select * from papers_people PA, people A WHERE PA.person_id = A.id AND PA.paper_id='${paper.id}'">
              <field column="id" name="author_id"/>
              <field column="first_name" name="first_name"/>
              <field column="last_name" name="last_name"/>
              <field column="full_name" name="author"/>
            </entity>
            <entity name="volume"
              query="SELECT * FROM volumes where id='${paper.volume_id}'">
              <field column="id" name="volume_id"/>
              <field column="title" name="volume_title"/>
              <field column="anthology_id" name="volume_anthology"/>
              <entity name="sig"
                query="select * from sigs_volumes SV, sigs S where SV.sig_id=S.id and SV.volume_id='${volume.id}'">
                <field column="id" name="sig_id"/>
                <field column="name" name="sig_name"/>
                <field column="url" name="sig_url"/>
                <field column="sigid" name="sig_iden"/>
              </entity>
              <entity name="event"
                query="select * from events_volumes EV, events E where EV.event_id=E.id and EV.volume_id='${volume.id}'">
                <field column="kind" name="event_kind"/>
                <entity name="venue"
                  query="select * from venues where id='${event.id}'">
                  <field column="id" name="venue_id"/>
                  <field column="name" name="venue_name"/>
                  <field column="acronym" name="venue_acronym"/>
                </entity>
              </entity>
            </entity>
    </entity>
    
    <!-- <entity name="User"
            query="select * from users">
    </entity> -->
  </document>
</dataConfig>