<% content_for :head do %>
  <meta content="<%= @paper.title %>" name="citation_title" >
  <% @authors.each do |author| %>
    <meta content="<%= author.full_name %>" name="citation_author" >
  <% end %>
  <meta content="<%= @paper.year %>" name="citation_publication_date" >

  <% if @paper.anthology_id[0] == 'W' %>
    <meta content="<%= Volume.find_by_anthology_id(@paper.anthology_id[0..5]).title %>" name="citation_journal_title" >
    <!-- <meta content="<%= @paper.anthology_id[0..5] %>" name="citation_volume" > -->
    <meta content="<%= @paper.anthology_id[0..2] %>" name="citation_volume" >
    <meta content="<%= @paper.anthology_id[-3..-1] %>" name="citation_issue" >
  <% else %>
    <meta content="<%= Volume.find_by_anthology_id(@paper.anthology_id[0..4]).title %>" name="citation_journal_title" >
    <!-- <meta content="<%= @paper.anthology_id[0..4] %>" name="citation_volume" > -->
    <meta content="<%= @paper.anthology_id[0..2] %>" name="citation_volume" >
    <meta content="<%= @paper.anthology_id[-4..-1] %>" name="citation_issue" >
  <% end %>
  
  <% if @paper.pages %>
    <meta content="<%= @paper.pages.split("–")[0] %>" name="citation_firstpage" >
    <meta content="<%= @paper.pages.split("–")[1] %>" name="citation_lastpage" >
  <% end %>
  
  <meta content="<%= "http://aclweb.org/anthology/" + @paper.anthology_id[0] + '/' + @paper.anthology_id[0..2] + '/' + @paper.anthology_id + ".pdf" %>" name="citation_pdf_url" >
<% end %>

<div class="row">
  <%- model_class = Paper -%>
  <div class="span12 page-header">
    <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
  </div>

  <div class="span6">
    <dl class="dl-horizontal">
      <dt><strong><%= model_class.human_attribute_name(:anthology_id) %>:</strong></dt>
      <dd><%= @paper.anthology_id %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:title) %>:</strong></dt>
      <dd><%= @paper.title %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:month) %>:</strong></dt>
      <dd><%= @paper.month %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:year) %>:</strong></dt>
      <dd><%= @paper.year %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:address) %>:</strong></dt>
      <dd><%= @paper.address %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:publisher) %>:</strong></dt>
      <dd><%= @paper.publisher %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:pages) %>:</strong></dt>
      <dd><%= @paper.pages %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:url) %>:</strong></dt>
      <dd><%= @paper.url %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:bibtype) %>:</strong></dt>
      <dd><%= @paper.bibtype %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:bibkey) %>:</strong></dt>
      <dd><%= @paper.bibkey %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:attachment) %>:</strong></dt>
      <dd><%= @paper.attachment %>&nbsp;</dd>
      <dt><strong><%= model_class.human_attribute_name(:attach_type) %>:</strong></dt>
      <dd><%= @paper.attach_type %>&nbsp;</dd>
    </dl>
  </div>

  <!-- Authors listing -->
  <div class="span6">
    <%- author_class = Person -%>
    <h3 style="text-align:center">Authors</h3>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th><%= author_class.human_attribute_name(:first_name) %></th>
          <th><%= author_class.human_attribute_name(:last_name) %></th>
          <th><%=t '.actions', :default => t("helpers.actions") %></th>
        </tr>
      </thead>
      <tbody>
        <% @authors.each do |person| %>
          <tr>
            <td><%= person.first_name %></td>
            <td><%= person.last_name %></td>
            <td>
              <%= link_to t('.view', :default => t("helpers.links.view")),
                              person_path(person), :class => 'btn btn-mini btn-primary' %>
              <!-- <%= link_to t('.edit', :default => t("helpers.links.edit")),
                          edit_person_path(person), :class => 'btn btn-mini' %>
              <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                          person_path(person),
                          :method => :delete,
                          :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                          :class => 'btn btn-mini btn-danger' %> -->
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- Papers actions -->
  <div class="form-actions span12">
      <%= link_to t('.back', :default => t("helpers.links.back")),
                  volume_path(@paper.volume_id), :class => 'btn'  %>
      <%= link_to t('.edit', :default => t("helpers.links.edit")),
                  edit_paper_path(@paper), :class => 'btn' %>
      <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                  paper_path(@paper),
                  :method => 'delete',
                  :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                  :class => 'btn btn-danger' %>
    </div>
  </div>
</div>